sudo: false
language: java
jdk: oraclejdk8
script:
- "./gradlew test"
after_success:
- mv build/distributions/nspek-integration-*.zip build/distributions/nspek-integration.zip
- test "$TRAVIS_BRANCH" == "master" && ./gradlew publishPlugin
env:
  global:
  - secure: T+yJtMPFKK3gxyq/SE0BMNDC+UoOAl5JNL9lch1p2+N0j3J/4iAO5AY9QwHxWfMMZjT4bUKo4VR1+FQARa8YDKzwgXjZM1Hh88R25QJA+Dvlovgb2kTtFq6+Bt+LFiv7D2SUkoj42lLDGsKifdFSYUH0cwEeSfD2eGIujsYQqhAF7j3Nbb4YHsYiK2wz2WtyyVDwgx00R8d6ggkAFUfGx3F+r3xwO5OwgF8hqCxom/06MlR424HQwTCguYF+JXP6VkRYNnw6DmqY9RnDo4ODUlVoiKu5sqZS91hfmDb0N1AviBg98tVEcr15OCfC0zvCX9RxpT9OsAx9vgXdaX1BZX7OrKsyvJ9tZeCdtB57kpqR0eNe31jMLelCsgix0HHY/Pjjf8t19yedctJwOftSNKxM8pKnqVtA+Ku9eDNg4wQ5yKCrHyPuqLwQ70bA+x35FIh9gGhOv1dZpNJytw4k/jsdaC0FxPJOoytIbn0LoPPH5G5DJbjvkgqUL322cVsUHgeNneSqdKukkUn0tUHnlEKKpBWk6S/nPxRPT8Brml0sT9g0kPsIQxoOjOnTA8VdtJ/5DM+bIbmM+n2MIUiizKu/P/5SExTQ9ufAVxPLO05dYpTzlfM9DQSTKdcKk3j0qqxhy7JIgXFFvfMvHARegrHkclWznCTLFn0jBFTRj3I=
  - secure: u5GnGQyzDzZczlSuiHlp2yOUU7b+22rAS3KKQI4SbXORogD+/1/jr/h4PUP4NYSTVE2PKOgnhVIJqzqbWAD84+UNRJE7rdaFPTRz5qn6D934m3vn7vHs+QOveq7PfB0yMrdmRaIY4CBFyFzGbVBAE3AfuMg5sPPJplqgM2djMjHMEYy4JmpjBba9yWD2rNPcga3aXtu0Aix3RaJBMvI07xIzeq5ztD2XEDrxbrOyt9NuZsgv0f6bNqRfFYWjOV4uepTtWZrcDkT3Xt4nOQf+N2wRfVGPN4GYBah57uskTedptpVCB52o0Wofqrsty51Q/FZmCgr//zbxhEFdRVyIVUPHjcU0KNa6LNCXzECq2VvleGlmlVhqcsofV8ZoXZjzfyXGvZjvkfY1c8I2YMOSbXSB/nJ5paoqlk/074CIx/42zhOkyCD51IJs66iMK98DrbFeJuy2IbU3NTOdIXkpALCkvS/m+ZqEffOjX1FRA11L80frR26pemv5FdUx/1D9e8ZDKDziDm1vP5GBOwofQE3NsveHyG1u4eWpqHcy6q/LK8QZ1B+ovd5yErWoCEBG6bCWEc9KGjeOUJ6XvF5iNjCbXQLCUeA/Mj5rbEqSxlewdoKmrr3NGbRd6p4i4dKMvZKfGeJNkyPAw506kJ8WjCn6KEVh6/tmKlCWtWPoiXU=
  - secure: t05C0Azkb0TnaXN07/rG8RbyPxK2+i5zcSKpb4tM2v/JVnOzthbFD0cr0oZtrkhpB8Moq82j5XxH9Z+DFVXfrmXaWWiT2qMaDOk1vlRg2PXhv5G8fSZc/vrJ8biXfpLM0ETNiIAZUeXuocVxrfr+hijd5uXXGXCBgf6RDk939ro2Z6vNOldM4DnQbVvvTGiyDM3Wb8Yq8Nuh9GU8X/ez1NXmJZ16G79x8yl6issf5LM0yRvRA9GnXu68VudZNYAZefD/Z3LoCXkTI+zr8I7/j9hFVkQWlMLgjUs6PZD+bX6E/KKRXzzH8fXS/BHq1BcY6M3lR49WECOWX6H4FGTUU2tyM5LkVaeg9flEL812XsYS0zBEN+j08N9xtE6q94bAGmUvfqt4aRtBUJ4lfcGRW0ZXZCDYm1MWXelThKZR+a+s2syfzDw9WEO5paYHVzSFmSwOAuNJ7Q497xGQ18JdXF3Ky5m2XGPWL8dftr0I6uMm6nclFzjFy0syypUJJu6FWGkjQKPZHAIPAwb/PXXk5eUTLYybcFWMTwU9Bfa0/niv3EbJilnE/Utkp5fa9XGFRDMq6lK8IrD/btK0KRrOWXg/mUVwUViygMvB1/s38k7b30I34E4JcLqN3ipr/H8XP21PMSEfw61kTDhXYet80I8b1aUih9G6BBx5jFOKAVw=
deploy:
  provider: releases
  api_key:
    secure: t05C0Azkb0TnaXN07/rG8RbyPxK2+i5zcSKpb4tM2v/JVnOzthbFD0cr0oZtrkhpB8Moq82j5XxH9Z+DFVXfrmXaWWiT2qMaDOk1vlRg2PXhv5G8fSZc/vrJ8biXfpLM0ETNiIAZUeXuocVxrfr+hijd5uXXGXCBgf6RDk939ro2Z6vNOldM4DnQbVvvTGiyDM3Wb8Yq8Nuh9GU8X/ez1NXmJZ16G79x8yl6issf5LM0yRvRA9GnXu68VudZNYAZefD/Z3LoCXkTI+zr8I7/j9hFVkQWlMLgjUs6PZD+bX6E/KKRXzzH8fXS/BHq1BcY6M3lR49WECOWX6H4FGTUU2tyM5LkVaeg9flEL812XsYS0zBEN+j08N9xtE6q94bAGmUvfqt4aRtBUJ4lfcGRW0ZXZCDYm1MWXelThKZR+a+s2syfzDw9WEO5paYHVzSFmSwOAuNJ7Q497xGQ18JdXF3Ky5m2XGPWL8dftr0I6uMm6nclFzjFy0syypUJJu6FWGkjQKPZHAIPAwb/PXXk5eUTLYybcFWMTwU9Bfa0/niv3EbJilnE/Utkp5fa9XGFRDMq6lK8IrD/btK0KRrOWXg/mUVwUViygMvB1/s38k7b30I34E4JcLqN3ipr/H8XP21PMSEfw61kTDhXYet80I8b1aUih9G6BBx5jFOKAVw=
  file: build/distributions/nspek-integration.zip
  skip_cleanup: true
  on:
    repo: ghostbuster91/nspek-intellij-plugin
    branch: master
